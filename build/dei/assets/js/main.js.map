{"version":3,"file":"dei/assets/js/main.js","mappings":"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","sources":["webpack://drupal-calendar/./src/index.js","webpack://drupal-calendar/./src/controller.class.js"],"sourcesContent":["\"use strict\";\n\nimport Controller from \"./controller.class\";\n\nimport \"./sass/styles.scss\";\n\nlet data;\n\ntry {\n  data = drupalSettings.detroitmi.dei.eventItems;\n\n  // data = drupalSettings.intranet.intranetJs.eventItems;\n} catch (error) {\n  data = null;\n}\n\nconst controller = new Controller('calendar', data, 'dei');\n\n// const controller = new Controller(\"calendar\", data, \"intranet\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  controller.init();\n});\n\ndocument.querySelectorAll(\".dei-filters\").forEach((filter) => {\n  filter.addEventListener(\"click\", (ev) => {\n    controller.submit(ev);\n  });\n});\n\ndocument.getElementById(\"calendar-filters\").addEventListener(\"submit\", (ev) => {\n  controller.submit(ev);\n});\n\ndocument.getElementById(\"calendar-filters\").addEventListener(\"reset\", (ev) => {\n  controller.reset(ev);\n});\n","\"use strict\";\n\nimport { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport listPlugin from \"@fullcalendar/list\";\n\nexport default class Controller {\n  constructor(container, data, mode) {\n    (this.container = document.getElementById(container)),\n      (this.data = data),\n      (this.mode = mode),\n      (this.calendar = null),\n      (this.calendarObj = {\n        plugins: [dayGridPlugin, listPlugin, timeGridPlugin],\n\n        defaultView: \"dayGridMonth\",\n\n        events: [],\n\n        header: {\n          left: \"prev,next\",\n\n          center: \"title\",\n\n          right: \"dayGridMonth timeGridWeek list\",\n        },\n\n        views: {\n          weekGrid: {\n            type: \"timeGridWeek\",\n\n            duration: { days: 7 },\n\n            buttonText: \"Week\",\n          },\n        },\n      });\n  }\n\n  init() {\n    this.calendar = new Calendar(this.container, this.calendarObj);\n\n    if (this.data) {\n      this.mode !== \"dei\" ? this.buildFilters() : 0;\n\n      this.buildEvents();\n    } else {\n      this.calendar.render();\n    }\n  }\n\n  buildFilters() {\n    // console.log('building filters');\n\n    let tempDepartments = [];\n\n    let tempNames = [];\n\n    let tempTypes = [];\n\n    let nameOptions = \"\";\n\n    let departmentOptions = \"\";\n\n    let typeOptions = \"\";\n\n    for (const event in this.data) {\n      tempNames.push(this.data[event].name);\n\n      tempDepartments.includes(this.data[event].departmentName)\n        ? 0\n        : tempDepartments.push(this.data[event].departmentName);\n\n      tempTypes.includes(this.data[event].type)\n        ? 0\n        : tempTypes.push(this.data[event].type);\n    }\n\n    tempDepartments.map((department) => {\n      departmentOptions += `<option value=\"${department}\"></option>`;\n    });\n\n    tempNames.map((name) => {\n      nameOptions += `<option value=\"${name}\"></option>`;\n    });\n\n    tempTypes.map((type) => {\n      typeOptions += `<option value=\"${type}\"></option>`;\n    });\n\n    document.getElementById(\"name-list\").innerHTML = nameOptions;\n\n    document.getElementById(\"department-list\").innerHTML = departmentOptions;\n\n    document.getElementById(\"type-list\").innerHTML = typeOptions;\n  }\n\n  buildSingeEvent(data) {\n    const currentURL = window.location.origin;\n\n    let tempArray = [];\n\n    let tempEvent;\n\n    for (const event in data) {\n      if (this.mode === \"dei\") {\n        tempEvent = {\n          id: data[event].id,\n\n          title: data[event].name,\n\n          start: data[event].start,\n\n          backgroundColor: this.getColor(data[event]),\n\n          url: `${currentURL}/node/${data[event].id}`,\n\n          className: data[event].type,\n        };\n      } else {\n        tempEvent = {\n          id: data[event].id,\n\n          title: data[event].name,\n\n          start: data[event].start,\n\n          url: `${currentURL}/node/${data[event].id}`,\n\n          className: data[event].type,\n        };\n      }\n\n      tempArray.push(tempEvent);\n    }\n\n    return tempArray;\n  }\n\n  getColor(event) {\n    switch (event.locationID) {\n      case \"10491\":\n        return \"#eb4034\";\n\n      case \"10486\":\n        return \"#ebc934\";\n\n      case \"10496\":\n        return \"#34eb65\";\n\n      case \"10501\":\n        return \"#3443eb\";\n\n      default:\n        break;\n    }\n  }\n\n  buildEvents(data = null) {\n    if (data) {\n      this.calendarObj.events = this.buildSingeEvent(data);\n    } else {\n      this.calendarObj.events = this.buildSingeEvent(this.data);\n    }\n\n    this.calendar.destroy();\n\n    this.calendar = new Calendar(this.container, this.calendarObj);\n\n    this.calendar.render();\n  }\n\n  reset(ev) {\n    setTimeout(() => {\n      this.filterCalendar();\n    }, 100);\n  }\n\n  submit(ev) {\n    // console.log(ev);\n\n    ev.preventDefault();\n\n    this.filterCalendar(ev);\n  }\n\n  filterCalendar(ev) {\n    let calendarMode = ev ? ev.target.getAttribute(\"data-mode\") : \"\";\n\n    let filterEvents;\n\n    switch (calendarMode) {\n      case \"dei\":\n        filterEvents = this.buildDEI(ev);\n\n        break;\n\n      default:\n        filterEvents = this.buildIntranet();\n\n        break;\n    }\n\n    this.buildEvents(filterEvents);\n  }\n\n  buildDEI(ev) {\n    console.log(ev.target.getAttribute(\"data-value\"));\n\n    let filterEvents = {};\n\n    for (const event in this.data) {\n      if (this.data[event].locationID == ev.target.getAttribute(\"data-value\")) {\n        filterEvents[this.data[event].id] = this.data[event];\n      }\n    }\n\n    console.log(filterEvents);\n\n    return filterEvents;\n  }\n\n  buildIntranet() {\n    let filterEvents = {};\n\n    let name = document.getElementById(\"name\").value;\n\n    let date = document.getElementById(\"start\").value;\n\n    let department = document.getElementById(\"department\").value;\n\n    let type = document.getElementById(\"type\").value;\n\n    for (const event in this.data) {\n      if (name != \"\") {\n        if (date != \"\") {\n          if (department != \"\") {\n            if (type != \"\") {\n              this.data[event].name == name &&\n              this.data[event].start == date &&\n              this.data[event].departmentName == department &&\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].name == name &&\n              this.data[event].start == date &&\n              this.data[event].departmentName == department\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          } else {\n            if (type != \"\") {\n              this.data[event].name == name &&\n              this.data[event].start == date &&\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].name == name && this.data[event].start == date\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          }\n        } else {\n          if (department != \"\") {\n            if (type != \"\") {\n              this.data[event].name == name &&\n              this.data[event].departmentName == department &&\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].name == name &&\n              this.data[event].departmentName == department\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          } else {\n            if (type != \"\") {\n              this.data[event].name == name && this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].name == name\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          }\n        }\n      } else {\n        if (date != \"\") {\n          if (department != \"\") {\n            if (type != \"\") {\n              this.data[event].start == date &&\n              this.data[event].departmentName == department &&\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].start == date &&\n              this.data[event].departmentName == department\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          } else {\n            if (type != \"\") {\n              this.data[event].start == date && this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].start == date\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          }\n        } else {\n          if (department != \"\") {\n            if (type != \"\") {\n              this.data[event].departmentName == department &&\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              this.data[event].departmentName == department\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            }\n          } else {\n            if (type != \"\") {\n              this.data[event].type == type\n                ? (filterEvents[this.data[event].id] = this.data[event])\n                : 0;\n            } else {\n              filterEvents = this.data;\n            }\n          }\n        }\n      }\n    }\n\n    return filterEvents;\n  }\n}\n"],"names":["data","drupalSettings","detroitmi","dei","eventItems","error","controller","constructor","container","mode","this","document","getElementById","calendar","calendarObj","plugins","dayGridPlugin","listPlugin","timeGridPlugin","defaultView","events","header","left","center","right","views","weekGrid","type","duration","days","buttonText","init","Calendar","buildFilters","buildEvents","render","tempDepartments","tempNames","tempTypes","nameOptions","departmentOptions","typeOptions","event","push","name","includes","departmentName","map","department","concat","innerHTML","buildSingeEvent","currentURL","window","location","origin","tempEvent","tempArray","id","title","start","backgroundColor","getColor","url","className","locationID","arguments","length","undefined","destroy","reset","ev","setTimeout","filterCalendar","submit","preventDefault","filterEvents","target","getAttribute","buildDEI","buildIntranet","console","log","value","date","addEventListener","querySelectorAll","forEach","filter"],"sourceRoot":""}